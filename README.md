# Telegram-бот для коллективной построчной генерации кода

Этот бот позволяет пользователям коллективно писать код, голосуя за следующую строку кода, предложенную большой языковой моделью (LLM).

## Основной функционал

- **Генерация опроса**: Создает опрос с 4 вариантами следующей строки кода.
- **Обработка голосов**: Собирает и обрабатывает голоса пользователей.
- **Персистентность**: Сохраняет историю опросов, позволяя восстанавливать состояние после перезапуска.
- **Сборка кода**: Формирует итоговый код на основе результатов голосований.

## Команды

### Для администратора:
- `/start`: Очищает историю чата и запускает первый опрос.
- `/code_completed`: Завершает код до компилируемого состояния с помощью LLM и отправляет результат.
- `/sendnow`: Немедленно отправляет следующий опрос.
- `/health`: Показывает статус бота.
- `/logs`: Показывает последние логи.

### Для всех пользователей:
- `/code`: Показывает текущий сгенерированный код.

## Установка и запуск

1.  **Клонируйте репозиторий:**
    ```bash
    git clone <URL репозитория>
    cd <имя папки>
    ```

2.  **Создайте и активируйте виртуальное окружение:**
    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Windows: venv\Scripts\activate
    ```

3.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Настройте переменные окружения:**
    Создайте файл `.env` на основе `.env.example` и заполните его вашими данными:
    - `TELEGRAM_BOT_TOKEN`: Токен вашего Telegram-бота.
    - `LLM_API_KEY`: Ключ API для используемой LLM.
    - `ADMIN_USER_ID`: ID вашего пользователя в Telegram для доступа к административным командам.

5.  **Запустите бота:**
    ```bash
    python main.py
    ```

Этот код представляет собой основу, которую можно дорабатывать и расширять, добавляя недостающие команды и улучшая логику обработки опросов и взаимодействия с LLM.
